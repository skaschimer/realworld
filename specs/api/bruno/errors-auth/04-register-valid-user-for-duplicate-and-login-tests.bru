meta {
  name: Register valid user for duplicate and login tests
  type: http
  seq: 4
}

post {
  url: {{host}}/api/users
  body: json
  auth: none
}

body:json {
  {
    "user": {
      "username": "ea_dup_{{uid}}",
      "email": "ea_dup_{{uid}}@test.com",
      "password": "password123"
    }
  }
}

assert {
  res.status: eq 201
}

script:post-response {
  bru.setVar("token", res.body.user.token);
}
